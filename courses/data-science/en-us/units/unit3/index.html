<!DOCTYPE html>
<html moznomarginboxes=""><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Unit 3: Looking for Trends </title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="bootstrap.css" title="default"/><link rel="stylesheet" type="text/css" href="pretty-printing.css" title="default"/><link rel="stylesheet" type="text/css" href="codemirror.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="textbook.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="codemirror.js"></script><script type="text/javascript" src="runmode.js"></script><script type="text/javascript" src="scheme2.js"></script><script type="text/javascript" src="pyret-mode.js"></script><script type="text/javascript" src="bootstraplesson.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML%2Chttp%3A%2F%2Fwww.cs.wpi.edu%2F%7Ekfisler%2Fmathjaxlocal.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="mature"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;">&bull;</td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Unit 3:<span class="mywbr"> &nbsp;</span> Looking for Trends </a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Unit_3__.Looking_for_.Trends_%29" class="tocsubseclink" data-pltdoc="x">Unit 3:<span class="mywbr"> &nbsp;</span> Looking for Trends </a></td></tr></table></div></div><div class="maincolumn"><div class="main"><a name="(part._.Unit_3__.Looking_for_.Trends_)"></a><p><script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script><noscript></noscript><script type="text/javascript" src="easyXDM.min.js"></script><noscript></noscript><script type="text/javascript" src="json2.min.js"></script><noscript></noscript><script type="text/javascript" src="wescheme-embedded.js"></script><noscript></noscript><script type="text/javascript" src="bootstrap-helpers.js"></script><noscript></noscript></p><div class="headercontent"><span class="BootstrapTitle"><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict.png" alt="image" width="156" height="156"/><span class="TitleUnitNum">Unit 3</span>Looking for Trends </span></div><div class="SubFlow" id="overviewDescr"><span class="BootstrapHeader">Unit Overview</span><p>Students continue practicing the Design Recipe, and explore scatter plots as a means of visualizing potential relationships between columns. They also learn how to build new columns, chain methods, and are introduced to Table Plans.</p></div><blockquote class="OverviewBoundary"><iframe id="forum_embed"></iframe><div class="summary"><div class="" id="BootstrapAgenda"><p>Agenda</p><ul class="BootstrapAgendaList"><li class="BootstrapAgendaListItem"><p><span class="BSLessonDuration">25 min</span><a href="#lesson_Review51684"><span class="BSLessonName">Review</span></a></p></li><li class="BootstrapAgendaListItem"><p><span class="BSLessonDuration">5 min</span><a href="#lesson_BuildingColumns51685"><span class="BSLessonName">Building Columns</span></a></p></li><li class="BootstrapAgendaListItem"><p><span class="BSLessonDuration">20 min</span><a href="#lesson_ChainingMethods51686"><span class="BSLessonName">Chaining Methods</span></a></p></li><li class="BootstrapAgendaListItem"><p><span class="BSLessonDuration">20 min</span><a href="#lesson_TablePlans51687"><span class="BSLessonName">Table Plans</span></a></p></li><li class="BootstrapAgendaListItem"><p><span class="BSLessonDuration">15 min</span><a href="#lesson_LookingforRelationships51688"><span class="BSLessonName">Looking for Relationships</span></a></p></li><li class="BootstrapAgendaListItem"><p><span class="BSLessonDuration">5 min</span><a href="#lesson_Closing51689"><span class="BSLessonName">Closing</span></a></p></li></ul></div><p><span href="../../../../data-science/en-us/units/unit3/index.html" class="TranslationButton">English</span></p><p><span href="#" class="TranslationButton">add translation</span></p><div id="ProductOutcomes" class=" "><span class="BootstrapHeader">Product Outcomes:</span><ul><li><p>Students extend the animals table using functions they&rsquo;ve defined earlier</p></li><li><p>Students define functions that sort, filter, or extend the animals table</p></li></ul></div><div id="LearningObjectives" class=" "><span class="BootstrapHeader">Standards and Evidence Statements:</span><p>Standards with prefix BS are specific to Bootstrap; others are from the Common Core. Mouse over each standard to see its corresponding evidence statements. Our <a href="http://www.bootstrapworld.org/materials/Standards.shtml" target="_blank">Standards Document</a> shows which units cover each standard. </p><ul class="LearningObjectivesList"><li class="LearningObjectivesListItem"><div class="LearningObjectivesListItemContents"><p><span style="font-weight: bold">Data 3.1.1</span>: Use computers to process information, find patterns, and test hypotheses about digitally processed information to gain insight and knowledge. [P4]</p><ul class="EvidenceStatementsList"><li class="EvidenceStatementsListItem"><p>Computers are used in an iterative and interactive way when processing digital information to gain insight and knowledge.</p></li><li class="EvidenceStatementsListItem"><p>Digital information can be filtered and cleaned by using computers to process information.</p></li><li class="EvidenceStatementsListItem"><p>Combining data sources, clustering data, and data classification are part of the process of using computers to process information.</p></li><li class="EvidenceStatementsListItem"><p>Insight and knowledge can be obtained from translating and transforming digitally represented information.</p></li></ul></div></li><li class="LearningObjectivesListItem"><div class="LearningObjectivesListItemContents"><p><span style="font-weight: bold">BS-DR.1</span>: The student is able to translate a word problem into a Contract and Purpose Statement</p><ul class="EvidenceStatementsList"><li class="EvidenceStatementsListItem"><p>given a word problem, identify the domain and range of a function</p></li><li class="EvidenceStatementsListItem"><p>given a word problem, write a Purpose Statement (i.e. - rewrite the problem in their own words)</p></li></ul></div></li><li class="LearningObjectivesListItem"><div class="LearningObjectivesListItemContents"><p><span style="font-weight: bold">BS-DR.2</span>: The student can derive test cases for a given contract and purpose statement</p><ul class="EvidenceStatementsList"><li class="EvidenceStatementsListItem"><p>given a Contract and a Purpose Statement, write multiple examples or test cases</p></li><li class="EvidenceStatementsListItem"><p>identifying correct and incorrect test cases for a function, based on its contract</p></li></ul></div></li><li class="LearningObjectivesListItem"><div class="LearningObjectivesListItemContents"><p><span style="font-weight: bold">BS-DR.4</span>: The student can solve word problems that involve data structures</p><ul class="EvidenceStatementsList"></ul></div></li><li class="LearningObjectivesListItem"><div class="LearningObjectivesListItemContents"><p><span style="font-weight: bold">BS-PL.3</span>: The student is able to use the syntax of the programming language to define values and functions</p><ul class="EvidenceStatementsList"></ul></div></li></ul></div><span class="BootstrapHeader">Length: 90 Minutes</span><div id="Glossary" class=" "><span class="BootstrapHeader">Glossary:</span><ul><li><p><span class="vocab">scatter plot</span>: A chart where points are placed on axes according to pairs of values</p></li></ul></div><div id="Materials" class=" "><span class="BootstrapHeader">Materials:</span><ul></ul></div><div id="Preparation" class=" "><span class="BootstrapHeader">Preparation:</span><ul></ul></div><div id="LanguageTable" class=" "><table cellspacing="0" cellpadding="0" class="thetable"><tr><td align="center" class="BootstrapTable"><p class="BootstrapTableHeader">Types</p></td><td align="center" class="BootstrapTable"><p class="BootstrapTableHeader">Functions</p></td><td align="center" class="BootstrapTable"><p class="BootstrapTableHeader">Values</p></td></tr><tr><td align="center" class="BootstrapTable"><p>Number</p></td><td align="center" class="BootstrapTable"><p><tt class="pyret">num-sqrt, num-sqr</tt></p></td><td align="center" class="BootstrapTable"><p><tt class="pyret">4, -1.2. 2/3</tt></p></td></tr><tr><td align="center" class="BootstrapTable"><p>String</p></td><td align="center" class="BootstrapTable"><p><tt class="pyret">string-repeat, string-contains</tt></p></td><td align="center" class="BootstrapTable"><p><tt class="pyret">"hello" "91"</tt></p></td></tr><tr><td align="center" class="BootstrapTable"><p>Boolean</p></td><td align="center" class="BootstrapTable"><p><tt class="pyret"></tt></p></td><td align="center" class="BootstrapTable"><p><tt class="pyret">true false</tt></p></td></tr><tr><td align="center" class="BootstrapTable"><p>Image</p></td><td align="center" class="BootstrapTable"><p><tt class="pyret">triangle, circle, star, rectangle, ellipse, square, text, overlay</tt></p></td><td align="center" class="BootstrapTable"><p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_2.png" alt="image" width="36" height="36"/><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_3.png" alt="image" width="36" height="32"/></p></td></tr><tr><td align="center" class="BootstrapTable"><p>Table</p></td><td align="center" class="BootstrapTable"><p><tt class="pyret">.row-n, .order-by, .filter</tt></p></td><td align="center" class="BootstrapTable"><p></p></td></tr></table></div><p><div id="lessonToolbar" class="fixed"><input type="button" valueShow="Show Teacher Notes" valueHide="Hide Teacher Notes" value="Show Teacher Notes" onclick="toggleTeacherNotes(this);"></input><br/><input type="button" value="Discussion Group" onclick="showGroup()"/><br/><input type="button" value="Slides" onclick="showSlides()"/></div></p></div></blockquote><blockquote class="LessonBoundary"><div class="BootstrapPageTitle">Review</div><div class="content"><div class="overview"><span class="BootstrapLogo"><p><img src="logo.png" alt="bootstrap logo" width="150" height="150"/></p></span><span class="BootstrapLessonTitle"><span class="BSLessonName"><p>Overview</p></span></span><div class="LessonLearningObjectives"><p><span style="font-weight: bold">Learning Objectives</span></p><ul></ul></div><div class="LessonEvidenceStatementes"><p><span style="font-weight: bold">Evidence Statementes</span></p><ul></ul></div><div class="LessonProductOutcomes"><p><span style="font-weight: bold">Product Outcomes</span></p><ul></ul></div><div class="LessonMaterials"><p><span style="font-weight: bold">Materials</span></p><ul></ul></div><div class="LessonPreparation"><p><span style="font-weight: bold">Preparation</span></p><ul></ul></div></div><div class="segment"><p><a name="lesson_Review51684"></a><span></span></p><span class="BootstrapLessonTitle"><span class="BSLessonName"><span class="Slide-Lesson-Title">Review</span>



<span class="time">(Time 25 minutes)</span>

</span><p></p></span><ul class="lesson"><li class="lessonItem"><div class="student"><p><span class="slideText"><span class="BootstrapSlideTitle">Review</span></span>Open your saved animals-dataset file. You should have several functions defined:</p><ul><li><p><tt class="pyret">is-fixed</tt></p></li><li><p><tt class="pyret">gender</tt></p></li><li><p><tt class="pyret">is-cat</tt></p></li><li><p><tt class="pyret">is-young</tt></p></li></ul><p>If you didn&rsquo;t have a chance to type them in from your workbook, make sure you do!</p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p><div class="SIntrapara">Can you use the Design Recipe to write a few more functions?
</div><div class="SIntrapara"><div class="activity"><p>Turn to <a href="../../resources/workbook/StudentWorkbook.pdf" target="_blank">Page 15</a>, and see if you can solve the following word problems:</p><ul><li><p>Define a function called <tt class="pyret">nametag</tt>, which prints out each animal&rsquo;s name in big red letters.</p></li><li><p>Define a function called <tt class="pyret">birth-year</tt>, which consumes a Row of the <tt class="pyret">animals-table</tt> and produces the year the kitten was born.</p></li></ul></div></div></p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p>When your teacher has checked your work, add these two functions at the bottom of your Definitions Area, save your work, and click Run.</p></div></li></ul></div></div></blockquote><blockquote class="LessonBoundary"><div class="BootstrapPageTitle">Building Columns</div><div class="content"><div class="overview"><span class="BootstrapLogo"><p><img src="logo.png" alt="bootstrap logo" width="150" height="150"/></p></span><span class="BootstrapLessonTitle"><span class="BSLessonName"><p>Overview</p></span></span><div class="LessonLearningObjectives"><p><span style="font-weight: bold">Learning Objectives</span></p><ul><li><p>Students learn how to compute new columns in Pyret</p></li></ul></div><div class="LessonEvidenceStatementes"><p><span style="font-weight: bold">Evidence Statementes</span></p><ul></ul></div><div class="LessonProductOutcomes"><p><span style="font-weight: bold">Product Outcomes</span></p><ul><li><p>Students extend the animals table using functions they&rsquo;ve defined earlier</p></li></ul></div><div class="LessonMaterials"><p><span style="font-weight: bold">Materials</span></p><ul></ul></div><div class="LessonPreparation"><p><span style="font-weight: bold">Preparation</span></p><ul></ul></div></div><div class="segment"><p><a name="lesson_BuildingColumns51685"></a><span></span></p><span class="BootstrapLessonTitle"><span class="BSLessonName"><span class="Slide-Lesson-Title">Building Columns</span>



<span class="time">(Time 5 minutes)</span>

</span><p></p></span><ul class="lesson"><li class="lessonItem"><div class="student"><p><span class="slideText"><span class="BootstrapSlideTitle">Building Columns</span></span>Sometimes we want to <span style="font-style: italic">add a column</span> to a Table, and we can use the <tt class="pyret">.build-column</tt> method to do just that. The contract for this method is shown below, along with an example expression that adds a "label" column to the <tt class="pyret">animals-table</tt> using your <tt class="pyret">nametag</tt> function.
&nbsp;<textarea class="pyret">
# &lt;Table&gt;.build-column :: (col :: String, builder :: (Row -&gt; Value)) -&gt; Table
animals-table.build-column("label", nametag)
</textarea></p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><div class="activity"><p>In the Interactions Area, use the <tt class="pyret">.build-column</tt> method to produce a table that includes a <tt class="pyret">born</tt> column, which contains the year each animal was born.</p></div></div><div class="teacher"></div></li></ul></div></div></blockquote><blockquote class="LessonBoundary"><div class="BootstrapPageTitle">Chaining Methods</div><div class="content"><div class="overview"><span class="BootstrapLogo"><p><img src="logo.png" alt="bootstrap logo" width="150" height="150"/></p></span><span class="BootstrapLessonTitle"><span class="BSLessonName"><p>Overview</p></span></span><div class="LessonLearningObjectives"><p><span style="font-weight: bold">Learning Objectives</span></p><ul><li><p>Students learn the syntax for chaining methods together</p></li></ul></div><div class="LessonEvidenceStatementes"><p><span style="font-weight: bold">Evidence Statementes</span></p><ul></ul></div><div class="LessonProductOutcomes"><p><span style="font-weight: bold">Product Outcomes</span></p><ul></ul></div><div class="LessonMaterials"><p><span style="font-weight: bold">Materials</span></p><ul></ul></div><div class="LessonPreparation"><p><span style="font-weight: bold">Preparation</span></p><ul></ul></div></div><div class="segment"><p><a name="lesson_ChainingMethods51686"></a><span></span></p><span class="BootstrapLessonTitle"><span class="BSLessonName"><span class="Slide-Lesson-Title">Chaining Methods</span>



<span class="time">(Time 20 minutes)</span>

</span><p></p></span><ul class="lesson"><li class="lessonItem"><div class="student"><p><span class="slideText"><span class="BootstrapSlideTitle">Chaining Methods</span></span>Table methods can be chained together, so that we can build, filter <span style="font-style: italic">and</span> order a Table. For example:
&nbsp;<textarea class="pyret">
# get a table with the nametags of all the fixed animals, ordered by species
animals-table.build-column("label", nametag).filter(is-fixed).order-by("species", true)
</textarea>
This code takes the <tt class="pyret">animals-table</tt>, and builds a new column. According to our Contracts Page, <tt class="pyret">.build-column</tt> produces a new Table, and that&rsquo;s the Table whose <tt class="pyret">.filter</tt> method we use. That method produces <span style="font-style: italic">yet another Table</span>, and we call that Table&rsquo;s <tt class="pyret">order-by</tt> method. The Table that comes back from that is our final result.</p></div><div class="teacher"><p>Suggestion: use different color markers to draw nested boxes around each part of the expression, showing where each Table came from.</p></div></li><li class="lessonItem"><div class="student"><p>It can be difficult to read code that has lots of method calls chained together, so we can break them up before each "<tt class="pyret">.</tt>" to make it more readable. Here&rsquo;s the exact same code, written with each method on it&rsquo;s own line:
&nbsp;<textarea class="pyret">
# get a table with the nametags of all the fixed animals, order by species
animals-table
  .build-column("label", nametag)
  .filter(is-fixed)
  .order-by("species", true)
</textarea></p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p>How well do you know your table methods? Complete <a href="../../resources/workbook/StudentWorkbook.pdf" target="_blank">Page 16</a> in your Student Workbook to find out!</p></div><div class="teacher"><p>Have students discuss their answers.</p></div></li><li class="lessonItem"><div class="student"><p><div class="banner">Order matters.</div>
Suppose we want to build a column and then use it to filter our table. If we use the methods in the wrong order (trying to filter by a column that doesn&rsquo;t exist yet), we might wind up crashing the program. Even worse, the program might <span style="font-style: italic">work</span>, but produce results that are incorrect! When chaining methods, it&rsquo;s important to build first, then filter, and then order.
<span style="font-style: italic"> So how do we know when we need which method, and in what order? </span></p></div></li></ul></div></div></blockquote><blockquote class="LessonBoundary"><div class="BootstrapPageTitle">Table Plans</div><div class="content"><div class="overview"><span class="BootstrapLogo"><p><img src="logo.png" alt="bootstrap logo" width="150" height="150"/></p></span><span class="BootstrapLessonTitle"><span class="BSLessonName"><p>Overview</p></span></span><div class="LessonLearningObjectives"><p><span style="font-weight: bold">Learning Objectives</span></p><ul><li><p>Students learn how to define functions using Table Plans</p></li></ul></div><div class="LessonEvidenceStatementes"><p><span style="font-weight: bold">Evidence Statementes</span></p><ul></ul></div><div class="LessonProductOutcomes"><p><span style="font-weight: bold">Product Outcomes</span></p><ul><li><p>Students define functions that sort, filter, or extend the animals table</p></li></ul></div><div class="LessonMaterials"><p><span style="font-weight: bold">Materials</span></p><ul></ul></div><div class="LessonPreparation"><p><span style="font-weight: bold">Preparation</span></p><ul><li></li></ul></div></div><div class="segment"><p><a name="lesson_TablePlans51687"></a><span></span></p><span class="BootstrapLessonTitle"><span class="BSLessonName"><span class="Slide-Lesson-Title">Table Plans</span>



<span class="time">(Time 20 minutes)</span>

</span><p></p></span><ul class="lesson"><li class="lessonItem"><div class="student"><p><span class="slideText"><span class="BootstrapSlideTitle">Table Plans</span></span>Suppose I wanted to get a bar-chart of animal&rsquo;s ages, for only the cats in the shelter, sorted alphabetically by name. How would I do that?
&nbsp;<textarea class="pyret">
t = animals-table.filter(is-cat).order-by("name")
bar-chart(t, "name", "age")
</textarea>
Then I want to get the same bar chart, but now for only the fixed animals, sorted alphabetically by name. How would I do that?
&nbsp;<textarea class="pyret">
t = animals-table.filter(is-fixed).order-by("name")
bar-chart(t, "name", "age")
</textarea>
Then I want to get the same bar chart, but now for only the young animals, sorted alphabetically by name. How would I do that?
&nbsp;<textarea class="pyret">
t = animals-table.filter(is-young).order-by("name")
bar-chart(t, "name", "age")
</textarea></p></div><div class="teacher"><p>Have students volunteer this, whenever possible.</p></div></li><li class="lessonItem"><div class="student"><p>This is really repetitive, isn&rsquo;t it? We&rsquo;re always doing the same two things:</p><ul><li><p> Define the table - in this case, by filtering and sorting. </p></li><li><p> Do something with it - in this case, make a bar chart. </p></li></ul><p>Wouldn&rsquo;t it be great if Pyret had a function that just took in a table of animals, and did these things for us? This seems like a problem we&rsquo;ve seen before, back when we defined functions like <tt class="pyret">gender</tt> or <tt class="pyret">nametag</tt>: whenever we have the same code written over and over, we can use functions to save us the effort!</p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p>Rather than rewrite the same method chain for every table, we can define a function that consumes an entire table and does the work for us. That way we can write the method chain once, and re-use it over and over. We can modify the Design Recipe slightly to help us keep our method order straight, turning it into something called a <span style="font-weight: bold">Table Plan</span>. Turn to page <a href="../../resources/workbook/StudentWorkbook.pdf" target="_blank">Page 17</a>.</p></div><div class="teacher"><p>Table Plans are like the Design Recipe, but for manipulating tables. They enforce a <span style="font-style: italic">way of thinking</span>, which is important for your students.</p></div></li><li class="lessonItem"><div class="student"><p>Table Plans are a lot like the Design Recipe. They start with a Contract and Purpose Statement, but involve different kinds of examples and can often involve <span style="font-style: italic">multiple</span> function definitions. Let&rsquo;s use our filtered bar chart as an example, which ties together all the pieces you&rsquo;ve seen before.</p></div><div class="teacher"><p>Your students should be <span style="font-style: italic">very</span> comfortable with the Design Recipe before proceeding!</p></div></li><li class="lessonItem"><div class="student"><p><div class="banner">Step 1: Contract and Purpose</div>
We&rsquo;re going to build a function that does this for us, and we&rsquo;ll start with the name. Naming is more complex in Table Plans, since we want to name the function according to the most important parts of what it does. Since we&rsquo;re getting an alphabetically-sorted bar chart of their ages, we&rsquo;ll call it <tt class="pyret">sorted-age-bar</tt>. Instead of consuming Rows, this time we&rsquo;re consuming and producing <span style="font-style: italic">Tables</span>. This gives us the following:</p><p>&nbsp;<textarea class="pyret">
# sorted-age-bar :: (animals :: Table) -&gt; Table
# consume a table of animals, and produce a bar chart
# of their ages, sorted alphabetically
</textarea></p></div><div class="teacher"><p>Ask students to volunteer other names - but push them to keep the relevant info as part of the name!</p></div></li><li class="lessonItem"><div class="student"><p><div class="banner">Step 2: Examples</div>
This is really similar to writing examples with the Design Recipe, but everything stays on paper. First, we write down a small sample of the <tt class="pyret">animals-table</tt>, called an Example Table. This example should contain all of the <span style="font-style: italic">relevant</span> columns, and enough rows to give us an idea for how the function should work. Then, on the righthand side, we write or sketch what we expect to get back.</p><ul><li><p> What columns do we care about? </p></li><li><p> In the Interactions Area, how would you <span style="font-style: italic">use</span> this function, passing in the <tt class="pyret">example-table</tt>? </p></li><li><p> What would <tt class="pyret">sorted-age-bar(table)</tt> evaluate to? </p></li></ul><p>In this case, we care about the name and age columns. According to our contract we would need to call the function&rsquo;s name and pass in only a table. According to the purpose statement, typing <tt class="pyret">sorted-age-bar(example-table)</tt> into the Interactions Area should give us a bar chart of all the animal&rsquo;s ages, sorted by name.</p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p><div class="banner">Step 3: Define the Function <span style="font-style: italic">in two parts</span></div>
The final step is to define a function that executes our Table Plan. We&rsquo;ll do this in two parts. First, we&rsquo;ll define a table by applying our methods to the input. Then, we&rsquo;ll do something with that table to produce a result. We already know how to start:
&nbsp;<textarea class="pyret">
# sorted-age-bar :: (animals :: Table) -&gt; Table
# Consume a table of animals, and compute a bar chart
# showing their ages, in alphabetical order
fun sorted-age-bar(animals):
    ...         # define the table
    ...         # produce the result
end
</textarea></p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p>To define this table, we&rsquo;ll ask ourselves three questions, in order:</p><ul><li><p>Does our Result have more columns than our Sample Table? If so, we&rsquo;ll need to use <tt class="pyret">.build-column</tt>.</p></li><li><p>Does our Result have fewer rows than our Sample Table? If so, we&rsquo;ll need to use <tt class="pyret">.filter</tt>.</p></li><li><p>Does our Result have its rows in some order? If so, we&rsquo;ll need to use <tt class="pyret">.order-by</tt>.</p></li></ul><div class="activity"><p>If the answer to any of these questions is "no", <span style="font-style: italic">cross out that line in the template</span>.</p></div></div><div class="teacher"><p>Only <tt class="pyret">.order-by</tt> is needed!</p></div></li><li class="lessonItem"><div class="student"><p>All three methods are needed, so we won&rsquo;t cross anything out. You&rsquo;re already familiar with definitions in Pyret, and that&rsquo;s what we&rsquo;ll use here. Let&rsquo;s start with the name <tt class="pyret">t</tt> for Table.</p><ul><li><p> Are there more columns in our result? No, nothing new gets added. </p></li><li><p> Are there fewer rows in our result? No, the whole table get plotted. </p></li><li><p> Are the rows ordered? YES! According to our purpose statement, the animals are sorted alphabetically by name. </p></li></ul><p>&nbsp;<textarea class="pyret">
# sorted-age-bar :: (animals :: Table) -&gt; Table
# cConsume a table of animals, and compute a bar chart
# showing their ages, in alphabetical order
fun sorted-age-bar(animals):
    t = animals # define the table
      .order-by("name", true)
    ...         # produce the result
end
</textarea></p></div><div class="teacher"><p>It may be helpful to start with the table definition all on one line, and have students see you break it up to accommodate chaining. Students should be reminded that both forms are valid, but encouraged to use the latter.</p></div></li><li class="lessonItem"><div class="student"><p>Now that we have our new table, <tt class="pyret">t</tt> defined, what do we need to do with it? According to our purpose statement, we need to <span style="font-style: italic">make a bar chart</span>.
&nbsp;<textarea class="pyret">
# sorted-age-bar :: (animals :: Table) -&gt; Table
# Consume a table of animals, and compute a bar chart
# showing their ages, in alphabetical order
fun sorted-age-bar(animals):
    t = animals # define the table
      .order-by("name", true)
    bar-chart(t, "name", "age") # produce the result
end
</textarea></p></div><div class="teacher"><p>Drawing arrows from the <tt class="pyret">t</tt> expression on the last line back to the <tt class="pyret">t</tt> definition on the first line would be a good idea here. Make sure students see the connection between "defining the table...and using it"!</p></div></li><li class="lessonItem"><div class="student"><p><div class="SIntrapara">Once you&rsquo;ve typed in the Contract, Purpose and Function Definition, click "Run". How do we use this function? If you look in the <span style="font-weight: bold">Examples</span> section, you&rsquo;ll see that the Result is written underneath the expression <tt class="pyret">sorted-age-bar(animals-table)</tt>. That&rsquo;s the code that should give us the result, so let&rsquo;s type it in!
</div><div class="SIntrapara"><div class="activity"><p>Type in the code and hit Enter. Did you get back the same result you expected?</p></div></div></p></div><div class="teacher"></div></li></ul></div></div></blockquote><blockquote class="LessonBoundary"><div class="BootstrapPageTitle">Looking for Relationships</div><div class="content"><div class="overview"><span class="BootstrapLogo"><p><img src="logo.png" alt="bootstrap logo" width="150" height="150"/></p></span><span class="BootstrapLessonTitle"><span class="BSLessonName"><p>Overview</p></span></span><div class="LessonLearningObjectives"><p><span style="font-weight: bold">Learning Objectives</span></p><ul></ul></div><div class="LessonEvidenceStatementes"><p><span style="font-weight: bold">Evidence Statementes</span></p><ul></ul></div><div class="LessonProductOutcomes"><p><span style="font-weight: bold">Product Outcomes</span></p><ul></ul></div><div class="LessonMaterials"><p><span style="font-weight: bold">Materials</span></p><ul></ul></div><div class="LessonPreparation"><p><span style="font-weight: bold">Preparation</span></p><ul><li></li></ul></div></div><div class="segment"><p><a name="lesson_LookingforRelationships51688"></a><span></span></p><span class="BootstrapLessonTitle"><span class="BSLessonName"><span class="Slide-Lesson-Title">Looking for Relationships</span>



<span class="time">(Time 15 minutes)</span>

</span><p></p></span><ul class="lesson"><li class="lessonItem"><div class="student"><p><span class="slideText"><span class="BootstrapSlideTitle">Looking for Relationships</span></span>Why are some animals adopted quickly, while others take a long time? What factors explain why one pet gets adopted right away, and others wait months?</p></div><div class="teacher"><p>Ask the class for theories.</p></div></li><li class="lessonItem"><div class="student"><p>One theory is that people adopt smaller animals because they&rsquo;re easier to care for. How could we test that theory? Bar and pie charts are great for showing us how the values of a single column are distributed, but they can&rsquo;t help us see connections between <span style="font-style: italic">two</span> columns.</p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p><div class="SIntrapara">Fortunately, Pyret lets us make many kinds of charts, including <span class="vocab">scatter plots</span>! Here&rsquo;s the contract for <tt class="pyret">scatter-plot</tt>, as well as an example of a scatter plot that examines the relationship between weight and adoption time.
&nbsp;<textarea class="pyret">
# scatter-plot :: (t :: Table, xs :: String, ys :: String) -&gt; Image
scatter-plot(animals-table, "pounds", "weeks") # see if smaller animals get adopted faster
</textarea>
</div><div class="SIntrapara"><div class="activity"><p> Try making a few scatter plots, looking for relationships between columns in the animals-table. </p></div></div></p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p><div class="SIntrapara">Another theory is that people adopt younger animals because they are cuter. But cats, dogs, rabbits and tarantulas have very different lifespans! A 5 year old tarantula is still really young, while a 5 year old rabbit is fully grown. With differences like this, it doesn&rsquo;t make sense to put them all on the same chart! To do this analysis, we might have to make several charts, all of which do the same thing but operate on different tables: one for cats, one for dogs, etc.
</div><div class="SIntrapara"><div class="activity"><p>Turn to <a href="../../resources/workbook/StudentWorkbook.pdf" target="_blank">Page 18</a> in your Student Workbook, and practice using a Table Plan write this function! Do you see a trend in the scatterplots for all the animals? For the cats? The young animals? The fixed animals? In which group is this trend the most clear?</p></div></div></p></div><div class="teacher"></div></li></ul></div></div></blockquote><blockquote class="LessonBoundary"><div class="BootstrapPageTitle">Closing</div><div class="content"><div class="overview"><span class="BootstrapLogo"><p><img src="logo.png" alt="bootstrap logo" width="150" height="150"/></p></span><span class="BootstrapLessonTitle"><span class="BSLessonName"><p>Overview</p></span></span><div class="LessonLearningObjectives"><p><span style="font-weight: bold">Learning Objectives</span></p><ul></ul></div><div class="LessonEvidenceStatementes"><p><span style="font-weight: bold">Evidence Statementes</span></p><ul></ul></div><div class="LessonProductOutcomes"><p><span style="font-weight: bold">Product Outcomes</span></p><ul></ul></div><div class="LessonMaterials"><p><span style="font-weight: bold">Materials</span></p><ul></ul></div><div class="LessonPreparation"><p><span style="font-weight: bold">Preparation</span></p><ul><li></li></ul></div></div><div class="segment"><p><a name="lesson_Closing51689"></a><span></span></p><span class="BootstrapLessonTitle"><span class="BSLessonName"><span class="Slide-Lesson-Title">Closing</span>



<span class="time">(Time 5 minutes)</span>

</span><p></p></span><ul class="lesson"><li class="lessonItem"><div class="student"><p><span class="slideText"><span class="BootstrapSlideTitle">Closing</span></span>      Building functions is a powerful technique, which you&rsquo;ll use throughout the course. Today, you learned how to write functions that work on one row of a table at a time. In the next lesson, you&rsquo;ll learn how to use those functions to loop over an <span style="font-style: italic">entire table</span>, letting us extend, filter, and sort our <tt class="pyret">animals-table</tt></p><div class="activity"><p>Make sure to save your work.  Hit the Save button in the top left. This will save your program in the code.pyret.org folder within your Google Drive.</p></div></div><div class="teacher"><p>If your students are working in pairs/groups, make sure that each student has access to a version of the program.  The student who saved the program to their Google Drive can share their program with anyone by hitting the Publish button in the top left, choosing "Publish a new copy", then clicking the "Share Link" option.  This will allow them to copy a link to the program, then send to their partners in an email/message.</p></div></li></ul></div></div></blockquote><p></p><div id="copyright"><a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank"><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_4.png" alt="image" width="94" height="37"/></a>Bootstrap:Data Science by Emmanuel Schanzer, Sam Dooman, Shriram Krishnamurthi, Joe Politz and Ben Lerner is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">Creative Commons 4.0 Unported License</a>. Based on a work at <a href="http://www.bootstrapworld.org/">www.BootstrapWorld.org</a>. Permissions beyond the scope of this license may be available by contacting <a href="mailto:schanzer@BootstrapWorld.org">schanzer@BootstrapWorld.org</a>.</div></div></div><div id="contextindicator">&nbsp;</div></body></html>