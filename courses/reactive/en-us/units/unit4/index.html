<!DOCTYPE html>
<html moznomarginboxes=""><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Unit 4: Functions that Ask Questions</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="bootstrap.css" title="default"/><link rel="stylesheet" type="text/css" href="pretty-printing.css" title="default"/><link rel="stylesheet" type="text/css" href="codemirror.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="textbook.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="codemirror.js"></script><script type="text/javascript" src="runmode.js"></script><script type="text/javascript" src="scheme2.js"></script><script type="text/javascript" src="pyret-mode.js"></script><script type="text/javascript" src="bootstraplesson.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML%2Chttp%3A%2F%2Fwww.cs.wpi.edu%2F%7Ekfisler%2Fmathjaxlocal.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="mature"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;">&bull;</td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Unit 4:<span class="mywbr"> &nbsp;</span> Functions that Ask Questions</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Unit_4__.Functions_that_.Ask_.Questions%29" class="tocsubseclink" data-pltdoc="x">Unit 4:<span class="mywbr"> &nbsp;</span> Functions that Ask Questions</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><a name="(part._.Unit_4__.Functions_that_.Ask_.Questions)"></a><p><script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script><noscript></noscript><script type="text/javascript" src="easyXDM.min.js"></script><noscript></noscript><script type="text/javascript" src="json2.min.js"></script><noscript></noscript><script type="text/javascript" src="wescheme-embedded.js"></script><noscript></noscript><script type="text/javascript" src="bootstrap-helpers.js"></script><noscript></noscript></p><div class="headercontent"><span class="BootstrapTitle"><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict.png" alt="image" width="156" height="156"/><span class="TitleUnitNum">Unit 4</span>Functions that Ask Questions</span></div><div class="SubFlow" id="overviewDescr"><span class="BootstrapHeader">Unit Overview</span><p>Students are introduced to conditionals using <span class="stt">if-expressions</span>, on both built-in data (like numbers) and on programmer-defined data structures.
They then use conditionals to implement an animation that goes through distinct phases. They also learn about helper functions, which abstract away
frequently-used code to improve readability and reduce duplication.</p></div><blockquote class="OverviewBoundary"><iframe id="forum_embed"></iframe><div class="summary"><div class="" id="BootstrapAgenda"><p>Agenda</p><ul class="BootstrapAgendaList"><li class="BootstrapAgendaListItem"><p><span class="BSLessonDuration">15 min</span><a href="#lesson_WhattoWear48238"><span class="BSLessonName">What to Wear</span></a></p></li><li class="BootstrapAgendaListItem"><p><span class="BSLessonDuration">35 min</span><a href="#lesson_Where'smyOrder%3F48239"><span class="BSLessonName">Where&rsquo;s my Order?</span></a></p></li><li class="BootstrapAgendaListItem"><p><span class="BSLessonDuration">15 min</span><a href="#lesson_PiecewiseBugHunting48240"><span class="BSLessonName">Piecewise Bug Hunting</span></a></p></li><li class="BootstrapAgendaListItem"><p><span class="BSLessonDuration">20 min</span><a href="#lesson_ColorfulSun48241"><span class="BSLessonName">Colorful Sun</span></a></p></li></ul></div><p><span href="../../../../reactive/en-us/units/unit4/index.html" class="TranslationButton">English</span></p><p><span href="#" class="TranslationButton">add translation</span></p><div id="ProductOutcomes" class=" "><span class="BootstrapHeader">Product Outcomes:</span><ul><li><p>Students learn conditional expressions by writing a simple function</p></li></ul></div><div id="LearningObjectives" class=" "><span class="BootstrapHeader">Standards and Evidence Statements:</span><p>Standards with prefix BS are specific to Bootstrap; others are from the Common Core. Mouse over each standard to see its corresponding evidence statements. Our <a href="http://www.bootstrapworld.org/materials/Standards.shtml" target="_blank">Standards Document</a> shows which units cover each standard. </p><ul class="LearningObjectivesList"><li class="LearningObjectivesListItem"><div class="LearningObjectivesListItemContents"><p><span style="font-weight: bold">BS-DS.2</span>: The student is able to solve problems using data structures</p><ul class="EvidenceStatementsList"></ul></div></li><li class="LearningObjectivesListItem"><div class="LearningObjectivesListItemContents"><p><span style="font-weight: bold">BS-IDE</span>: The student is familiar with using a REPL, entering expressions properly, and interpreting error messages</p><ul class="EvidenceStatementsList"></ul></div></li></ul></div><span class="BootstrapHeader">Length: 85 Minutes</span><div id="Glossary" class=" "><span class="BootstrapHeader">Glossary:</span><ul><li><p><span class="vocab">helper function</span>: A small function that handles a specific part of another computation, and gets called from other functions</p></li><li><p><span class="vocab">piecewise function</span>: a function that computes different expressions based on its input</p></li></ul></div><div id="Materials" class=" "><span class="BootstrapHeader">Materials:</span><ul><li><p>Pens/pencils for the students, fresh whiteboard markers for teachers</p></li><li><p>Class poster (List of rules, design recipe, course calendar)</p></li><li><p>Editing environment (Pyret Editor)</p></li><li><p>Language Table</p></li></ul></div><div id="Preparation" class=" "><span class="BootstrapHeader">Preparation:</span><ul><li><p>The <a href="https://code.pyret.org/editor#share=0B9rKDmABYlJVaUw0VjdiOE5DVzQ" target="_blank">What to Wear</a> file, preloaded on students&rsquo; machines</p></li><li><p>The <a href="https://code.pyret.org/editor#share=0B9rKDmABYlJVNDdsNDBNcHdSVWs" target="_blank">Where's my Order?</a> file preloaded on students&rsquo; machines</p></li></ul></div><div id="LanguageTable" class=" "><table cellspacing="0" cellpadding="0" class="thetable"><tr><td align="center" class="BootstrapTable"><p class="BootstrapTableHeader">Types</p></td><td align="center" class="BootstrapTable"><p class="BootstrapTableHeader">Functions</p></td><td align="center" class="BootstrapTable"><p class="BootstrapTableHeader">Values</p></td></tr><tr><td align="center" class="BootstrapTable"><p>Number</p></td><td align="center" class="BootstrapTable"><p><tt class="pyret">+ - * / num-sqr num-sqrt num-expt</tt></p></td><td align="center" class="BootstrapTable"><p></p></td></tr><tr><td align="center" class="BootstrapTable"><p>String</p></td><td align="center" class="BootstrapTable"><p><tt class="pyret">string-append string-length</tt></p></td><td align="center" class="BootstrapTable"><p></p></td></tr><tr><td align="center" class="BootstrapTable"><p>Image</p></td><td align="center" class="BootstrapTable"><p><tt class="pyret">rectangle circle triangle ellipse star text scale rotate put-image</tt></p></td><td align="center" class="BootstrapTable"><p></p></td></tr></table></div><p><div id="lessonToolbar" class="fixed"><input type="button" valueShow="Show Teacher Notes" valueHide="Hide Teacher Notes" value="Show Teacher Notes" onclick="toggleTeacherNotes(this);"></input><br/><input type="button" value="Discussion Group" onclick="showGroup()"/><br/><input type="button" value="Slides" onclick="showSlides()"/></div></p></div></blockquote><blockquote class="LessonBoundary"><div class="BootstrapPageTitle">What to Wear</div><div class="content"><div class="overview"><span class="BootstrapLogo"><p><img src="logo.png" alt="bootstrap logo" width="150" height="150"/></p></span><span class="BootstrapLessonTitle"><span class="BSLessonName"><p>Overview</p></span></span><div class="LessonLearningObjectives"><p><span style="font-weight: bold">Learning Objectives</span></p><ul></ul></div><div class="LessonEvidenceStatementes"><p><span style="font-weight: bold">Evidence Statementes</span></p><ul></ul></div><div class="LessonProductOutcomes"><p><span style="font-weight: bold">Product Outcomes</span></p><ul><li><p>Students learn conditional expressions by writing a simple function</p></li></ul></div><div class="LessonMaterials"><p><span style="font-weight: bold">Materials</span></p><ul><li><p>Pens/pencils for the students, fresh whiteboard markers for teachers</p></li><li><p>Class poster (List of rules, design recipe, course calendar)</p></li><li><p>Editing environment (Pyret Editor)</p></li><li><p>Language Table</p></li></ul></div><div class="LessonPreparation"><p><span style="font-weight: bold">Preparation</span></p><ul><li><p>The <a href="https://code.pyret.org/editor#share=0B9rKDmABYlJVaUw0VjdiOE5DVzQ" target="_blank">What to Wear</a> file, preloaded on students&rsquo; machines</p></li></ul></div></div><div class="segment"><p><a name="lesson_WhattoWear48238"></a><span></span></p><span class="BootstrapLessonTitle"><span class="BSLessonName"><span class="Slide-Lesson-Title">What to Wear</span>



<span class="time">(Time 15)</span>

</span><p></p></span><ul class="lesson"><li class="lessonItem"><div class="student"><p><span class="slideText"><span class="BootstrapSlideTitle">What to Wear</span></span>
In Bootstrap:Algebra, you learned about the <tt class="pyret">cond</tt> syntax for writing
<span style="font-style: italic">conditional expressions</span>, which would ask questions and pick different
answers depending on the results.  Pyret has a similar feature, the&#160;<tt class="pyret">if</tt>
expression.</p><div class="activity"><p>Open the file at <a href="https://code.pyret.org/editor#share=0B9rKDmABYlJVaUw0VjdiOE5DVzQ" target="_blank">What to Wear</a>. After reading through the definition for the <tt class="pyret">wear</tt> function:</p><ul><li><p>Click Run, so that you can use <tt class="pyret">wear</tt> in the interactions area.</p></li><li><p>What does <tt class="pyret">wear(50)</tt> evaluate to?</p></li><li><p>What does <tt class="pyret">wear(100)</tt> evaluate to?</p></li><li><p>What is the domain and range of the <tt class="pyret">wear</tt> function?</p></li><li><p>What is the name of the variable in the <tt class="pyret">wear</tt> function?</p></li><li><p>Change the <tt class="pyret">wear</tt> function to return the shorts outfit when it&rsquo;s cold
(less than 30 degrees).</p></li></ul></div></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p>The <tt class="pyret">if</tt> expression is similar to the <tt class="pyret">cond</tt> expression from Racket
in Bootstrap:Algebra.  The difference is in the syntax; the
behavior is the same. An <tt class="pyret">if</tt> expression has a few parts, in order:</p><ul><li><p>An <tt class="pyret">if</tt> clause</p></li><li><p>Any number of <tt class="pyret">else if</tt> clauses</p></li><li><p>An optional <tt class="pyret">else</tt> clause</p></li><li><p>An <tt class="pyret">end</tt> keyword</p></li></ul><p>The <tt class="pyret">if</tt> clause has a question, followed by a <tt class="pyret">:</tt> (a colon),
followed by an answer for if the question evaluates to <tt class="pyret">true</tt>.  Each
<tt class="pyret">else if</tt> clause also has a question, followed by a colon, followed by
an answer for if the question evaluates to <tt class="pyret">true</tt>. Just like in Racket, the <tt class="pyret">else:</tt> clause runs if none of the questions in the other clauses evaluated to <tt class="pyret">true</tt>.  It catches all the cases that aren&rsquo;t covered by a specific question in one of the <tt class="pyret">if</tt> or <tt class="pyret">else if</tt> clauses.</p></div><div class="teacher"><p>We mention that the <tt class="pyret">else:</tt> clause at the end of an <tt class="pyret">if</tt> expression is optional. Typically, it is important to make sure your code will account for all possible conditions, and ending with <tt class="pyret">else:</tt> is a useful catchall condition if all of the other conditions return false. However, this is optional in the case that every single possible condition is covered by <tt class="pyret">else if</tt> statements.</p></div></li><li class="lessonItem"><div class="student"><p>At this point, we need to remember an important lesson about the Design
Recipe for conditionals from Bootstrap:1. If we look at the examples for <tt class="pyret">wear</tt>, and circle everything that
changes, both the input (the temperature) and the output (the image) change.
However, <tt class="pyret">wear</tt> only has a single variable according to the domain in
its contract.  Also, the image is <span style="font-style: italic">completely dependent</span> on the temperature &#8211;
it isn&rsquo;t a separate independent variable, so it wouldn&rsquo;t make sense for it to be another element in the domain of <tt class="pyret">wear</tt>. The fact that we have <span style="font-style: italic">more changing things than elements in the domain</span> tells us that <tt class="pyret">wear</tt> must be a <span class="vocab">piecewise function</span>.  This is the same rule as in Bootstrap:Algebra, and just as we could in Racket, we can tell that a function must be piecewise just by looking at its contract and the examples.  This helps us identify when a function we are writing in our games needs to use <tt class="pyret">if</tt>, as long as we follow the Design Recipe when building it. Another way to recognize a piecewise function when looking at your examples is to note whether or not there are elements which <span style="font-style: italic">completely depend</span> on another. In <tt class="pyret">wear</tt>, the image depends on the temperature, and does not change independently, or in response to any other changes in the function. Keep an eye out for these dependent variables in your examples as you write them to help identify piecewise functions.</p></div><div class="teacher"><p> This is an important point to review.  Conditionals, or Piecewise functions, are a big moment in
Bootstrap:Algebra, and the extension of the Design Recipe is key for
students to design their own piecewise functions later on.  In the next
exercise, make sure they use the Recipe steps to remind them of the mechanics
of this type of function.</p></div></li></ul></div></div></blockquote><blockquote class="LessonBoundary"><div class="BootstrapPageTitle">Where&rsquo;s my Order?</div><div class="content"><div class="overview"><span class="BootstrapLogo"><p><img src="logo.png" alt="bootstrap logo" width="150" height="150"/></p></span><span class="BootstrapLessonTitle"><span class="BSLessonName"><p>Overview</p></span></span><div class="LessonLearningObjectives"><p><span style="font-weight: bold">Learning Objectives</span></p><ul><li><p>write a piecewise function from scratch using the Design Recipe</p></li><li><p>practice using dot accessors and boolean operations</p></li><li><p>reinforce the connection between a data structure and its drawing as an animation state</p></li></ul></div><div class="LessonEvidenceStatementes"><p><span style="font-weight: bold">Evidence Statementes</span></p><ul></ul></div><div class="LessonProductOutcomes"><p><span style="font-weight: bold">Product Outcomes</span></p><ul></ul></div><div class="LessonMaterials"><p><span style="font-weight: bold">Materials</span></p><ul></ul></div><div class="LessonPreparation"><p><span style="font-weight: bold">Preparation</span></p><ul><li><p>The <a href="https://code.pyret.org/editor#share=0B9rKDmABYlJVNDdsNDBNcHdSVWs" target="_blank">Where's my Order?</a> file preloaded on students&rsquo; machines</p></li></ul></div></div><div class="segment"><p><a name="lesson_Where'smyOrder%3F48239"></a><span></span></p><span class="BootstrapLessonTitle"><span class="BSLessonName"><span class="Slide-Lesson-Title">Where&rsquo;s my Order?</span>



<span class="time">(Time 35)</span>

</span><p></p></span><ul class="lesson"><li class="lessonItem"><div class="student"><p><span class="slideText"><span class="BootstrapSlideTitle">Where&rsquo;s my Order?</span></span>Let&rsquo;s revisit the package delivery drone from earlier.  We&rsquo;re going to write
a function that tells us where the package is for a given <tt class="pyret">DeliveryState</tt>.
This is the kind of function you might need to write later on in your game. For example, you may need to know whether a character has reached a portal at a certain part of the screen to advance to the next level, or if they&rsquo;ve fallen into dangerous lava!</p><div class="activity"><p>Open your workbook to <a href="../../resources/workbook/StudentWorkbook.pdf" target="_blank">Page 29</a>. Use the design recipe to write a function to tell you where the falling box is (either "road", "house", "delivery zone", or "air"), based on the DeliveryState.</p></div><p>Use this picture to figure out the regions of the different parts of the
background image:
<img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_2.png" alt="image" width="459" height="346"/></p><div class="activity"><p>Once you&rsquo;ve completed the problem on paper, open the <a href="https://code.pyret.org/editor#share=0B9rKDmABYlJVNDdsNDBNcHdSVWs" target="_blank">Where's my Order?</a> file. We&rsquo;ve gotten you started with the contract and purpose statement for <tt class="pyret">location</tt> in the file:</p></div><p>&nbsp;<textarea class="pyret">
# location :: DeliveryState -&gt; String
# Consumes a DeliveryState and produces a String
# representing the location of the box:
# either "road", "delivery zone", "house", or "air"

</textarea>
Copy the work you have in your workbook to implement <tt class="pyret">location</tt> on the computer.</p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p>In addition to writing your examples, you can also check that the <tt class="pyret">location</tt>
function&rsquo;s behavior matches what a drawing of a <tt class="pyret">DeliveryState</tt> instance
shows.  For example, if <tt class="pyret">location</tt> returns <tt class="pyret">"road"</tt> on some input,
when we draw that same input, it ought to look like the package has landed in the road!</p><div class="activity"><p>Experiment with this function!</p><ul><li><p>Click "Run" to compile your program, then close the animation window.</p></li><li><p>In the interactions pane, evaluate <tt class="pyret">location(START)</tt>. What does it return (hopefully <tt class="pyret">"air"</tt>)?</p></li><li><p>Evaluate <tt class="pyret">draw-state(START)</tt>. does it look like the box is in the air?</p></li><li><p>Do the same for an instance of a DeliveryState where the box is in the road, on the house, and in the delivery zone.</p></li></ul></div></div><div class="teacher"><p>These experiments show an important connection between functions that
work with instances of a data structure, and the way we draw those instances.
In our design for the animation, we have an understanding of what different
regions of the screen <span style="font-style: italic">mean</span>.  Here, we see that the <tt class="pyret">draw-state</tt> and
<tt class="pyret">location</tt> functions both share this understanding to give consistent
information about the animation.</p></div></li></ul></div></div></blockquote><blockquote class="LessonBoundary"><div class="BootstrapPageTitle">Piecewise Bug Hunting</div><div class="content"><div class="overview"><span class="BootstrapLogo"><p><img src="logo.png" alt="bootstrap logo" width="150" height="150"/></p></span><span class="BootstrapLessonTitle"><span class="BSLessonName"><p>Overview</p></span></span><div class="LessonLearningObjectives"><p><span style="font-weight: bold">Learning Objectives</span></p><ul><li><p>Practice with conditional syntax</p></li></ul></div><div class="LessonEvidenceStatementes"><p><span style="font-weight: bold">Evidence Statementes</span></p><ul></ul></div><div class="LessonProductOutcomes"><p><span style="font-weight: bold">Product Outcomes</span></p><ul></ul></div><div class="LessonMaterials"><p><span style="font-weight: bold">Materials</span></p><ul></ul></div><div class="LessonPreparation"><p><span style="font-weight: bold">Preparation</span></p><ul></ul></div></div><div class="segment"><p><a name="lesson_PiecewiseBugHunting48240"></a><span></span></p><span class="BootstrapLessonTitle"><span class="BSLessonName"><span class="Slide-Lesson-Title">Piecewise Bug Hunting</span>



<span class="time">(Time 15)</span>

</span><p></p></span><ul class="lesson"><li class="lessonItem"><div class="student"><p><div class="SIntrapara"><span class="slideText"><span class="BootstrapSlideTitle">Piecewise Bug Hunting</span></span></div><div class="SIntrapara"><div class="activity"><p>Open your workbook to <a href="../../resources/workbook/StudentWorkbook.pdf" target="_blank">Page 30</a>. In the left column, we&rsquo;ve given you broken or buggy Pyret code. On the right, we&rsquo;ve given you space to either write out the correct code, or write an explanation of the problems with the provided code.  Work through this workbook page, then check with your partner to confirm you&rsquo;ve found all the bugs!</p></div></div></p></div><div class="teacher"></div></li></ul></div></div></blockquote><blockquote class="LessonBoundary"><div class="BootstrapPageTitle">Colorful Sun</div><div class="content"><div class="overview"><span class="BootstrapLogo"><p><img src="logo.png" alt="bootstrap logo" width="150" height="150"/></p></span><span class="BootstrapLessonTitle"><span class="BSLessonName"><p>Overview</p></span></span><div class="LessonLearningObjectives"><p><span style="font-weight: bold">Learning Objectives</span></p><ul><li><p>Add a conditional to a draw function</p></li><li><p>See a piecewise function in action in a reactor</p></li></ul></div><div class="LessonEvidenceStatementes"><p><span style="font-weight: bold">Evidence Statementes</span></p><ul></ul></div><div class="LessonProductOutcomes"><p><span style="font-weight: bold">Product Outcomes</span></p><ul></ul></div><div class="LessonMaterials"><p><span style="font-weight: bold">Materials</span></p><ul></ul></div><div class="LessonPreparation"><p><span style="font-weight: bold">Preparation</span></p><ul></ul></div></div><div class="segment"><p><a name="lesson_ColorfulSun48241"></a><span></span></p><span class="BootstrapLessonTitle"><span class="BSLessonName"><span class="Slide-Lesson-Title">Colorful Sun</span>



<span class="time">(Time 20)</span>

</span><p></p></span><ul class="lesson"><li class="lessonItem"><div class="student"><p><span class="slideText"><span class="BootstrapSlideTitle">Colorful Sun</span></span>Let&rsquo;s return to your <a href="https://code.pyret.org/editor#share=0B9rKDmABYlJVSm94cFA4T3R2NTA" target="_blank">sunset animation</a> from the previous unit. Currently, the sun&rsquo;s x and y-coordinate change to make it move across the screen and disappear behind the horizon. In this unit, we&rsquo;ll make the animation a bit more realistic, by changing the <span style="font-style: italic">color</span> of the sun as it gets lower in the sky. At the top of the screen, the sun should be yellow, then change to orange as it gets to the middle of the screen, and then become red as it reaches the bottom, close to the horizon.</p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p><div class="SIntrapara">In programming, it is fairly common that you will change a program that you&rsquo;ve already
written to do something new or different. Modifying existing code is a valuable skill, and
one that we want to practice with this exercise.  It is so useful, in fact, that we&rsquo;ve
created a worksheet to help you map out what needs to change in an existing animation
to support new behavior.
</div><div class="SIntrapara"><div class="activity"><p>Turn to <a href="../../resources/workbook/StudentWorkbook.pdf" target="_blank">Page 31</a>. Fill in the description
of the animation change and three sample images at the top of the first page.
If you don&rsquo;t have colored pencils, just make an annotation near each sketch
as to what color the sun should be in that sketch.</p></div></div><div class="SIntrapara">Once you know what new behavior you want, the next task is to build it into your code.
The next two tables in the worksheet ask you to think about the NEW features that are
changing in your game and how you might capture them.
</div><div class="SIntrapara"><div class="activity"><p>Talk with your partner about what new information is changing and how you might
build that into your program. Does the color change in a predictable way?
Is the color a new field that is independent of the fields you already have?
Based on your answer, do you think you will need to add something new to your
<tt class="pyret">SunsetState</tt> data structure, or can you change the look of your animation
based on what is already there?</p></div></div></p></div><div class="teacher"><p>There are a number of ways students can solve this problem. Once students have brainstormed
with their partners, have a classroom discussion to have pairs share their ideas.</p></div></li><li class="lessonItem"><div class="student"><p><div class="SIntrapara">Since the color of the sun will be changing, we <span style="font-style: italic">could</span> add a field to the
<tt class="pyret">SunsetState</tt> data structure, such as a String with the current color name.
However, the color will not change independently:
we want the color to change based on the position of the sun in the sky, and get darker as it gets lower.
Let&rsquo;s figure out how to make the sun color change based only on the fields we already have.
</div><div class="SIntrapara"><div class="activity"><p>Fill in the table at the bottom of the worksheet
assuming we are not changing the data structure: which components
(including existing functions) need to change?</p></div></div><div class="SIntrapara">If we have decided not to add fields, you should have marked that the <tt class="pyret">draw-state</tt>
method changes, but nothing else needs to.  We only change <tt class="pyret">next-state-tick</tt> and
<tt class="pyret">next-state-key</tt> if there has been a change to the data structure.</div></p></div><div class="teacher"><p>You may need to guide students to realizing that a change in the appearance of the
animation can be done entirely through draw-state. This is another point for
emphasizing the separation between maintaining instances and drawing instances.</p></div></li><li class="lessonItem"><div class="student"><p>How do we change <tt class="pyret">draw-state</tt>? Our first instinct may be to turn it into a piecewise function,
and draw something different when the <tt class="pyret">SunsetState</tt>&rsquo;s y-coordinate gets below 225 or below 150.
This would yield code along the lines of:</p><p>&nbsp;<textarea class="pyret">
fun draw-state(a-sunset):
  if a-sunset.y &lt; 150:
    put-image(
    rectangle(WIDTH, HORIZON-HEIGHT, "solid", "brown"),
              200, 50,
              put-image(circle(25, "solid", "yellow"),
                        a-sunset.x, a-sunset.y,
     rectangle(WIDTH, HEIGHT, "solid", "light-blue")))
  else if a.sunset.y &lt; 225:
    # same code with "orange" as sun color
  else:
    # same code with "red" as sun color
 end
end 
</textarea></p><p>Notice that this version contains three very similar calls to <tt class="pyret">put-image</tt>. The <span style="font-style: italic">only</span>
thing that is different about these three calls is the color we use to draw the sun. Whenever you
find yourself writing nearly-identical expressions multiple times, you should create another
function that computes the piece that is different. You can then write the
overall expression just once, calling the new function to handle the different part. Functions
that handle one part of an overall computation are called <span class="vocab">helper functions</span>.</p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p>Assume for the moment that we had written a helper function called <tt class="pyret">draw-sun</tt> that takes a
<tt class="pyret">SunsetState</tt> and returns the image to use for the sun. If we had such a function, then
our <tt class="pyret">draw-state</tt> function would look as follows:</p><p>&nbsp;<textarea class="pyret">
fun draw-state(a-sunset):
  put-image(
  rectangle(WIDTH, HORIZON-HEIGHT, "solid", "brown"),
            200, 50,
            put-image(draw-sun(a-sunset),
                      a-sunset.x, a-sunset.y,
        rectangle(WIDTH, HEIGHT, "solid", "light-blue")))
end 
</textarea></p><div class="activity"><p>Open your workbook to <a href="../../resources/workbook/StudentWorkbook.pdf" target="_blank">Page 33</a>. Here we have directions for
writing a function called <tt class="pyret">draw-sun</tt>, Which consumes a <tt class="pyret">SunsetState</tt> and produces an
image of the sun, whose color is either "yellow", "orange", or "red" depending on its y-coordinate.</p></div></div><div class="teacher"><p>The word problem assumes a background scene size of 400x300 pixels. Once students use their
<tt class="pyret">draw-sun</tt> function in their animation, they may need to change the specific conditions
if they have a much larger or smaller scene.</p></div></li><li class="lessonItem"><div class="student"><p>Once you&rsquo;ve completed and typed the <tt class="pyret">draw-sun</tt> function into your <a href="https://code.pyret.org/editor#share=0B9rKDmABYlJVSm94cFA4T3R2NTA" target="_blank">sunset animation</a> program, modify <tt class="pyret">draw-state</tt> to use it as we showed just above.</p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p>Now let&rsquo;s think about having the sunset animation "start again" after the sun sets, with the sun
reappearing in the upper-left corner.</p><div class="activity"><p>Assume you edited your animation to restart the sun at the upper left after it sets.
What color <span style="font-style: italic">should</span> the sun be
when it appears at the upper-left the second time around?  What color <span style="font-style: italic">will</span> it be
based on your code?  Will it be yellow again, or will the color have changed somehow to red?</p></div><p>To figure this out, think about what controls the color of the sun in your current code.</p><div class="activity"><p>Edit the sunset animation so that the animation restarts. Which of your functions
has to be modified to include this change?  Is restarting fundamentally about drawing one
frame or about generating new instances?  Use that question to help yourself figure out which
function to modify.  You could use the space for examples of functions at the end of your
worksheet on extending the animation to write a new example before you modify your code.</p></div></div><div class="teacher"><p>This question about the color of the sun is an especially good question-and it likely to
come up-from students who may have experience programming with variables and updates in other languages,
such as Scratch (where the color would have changed to red). In our approach, where we simply
determine the sun color from the y-coordinate, the sun should naturally restart as yellow.
Of course, if students had maintained the sun color as a separate field in their data structure,
they would have to consider this issue, and manually reset the sun color as well as the y-coordinate
when restarting the animation.</p></div></li><li class="lessonItem"><div class="student"><p><span style="font-weight: bold">Optional:</span>In addition to changing the color of the sun, have the background color change
as well: it should be light blue when the sun is high in the sky, and get darker as the sun sets.</p></div><div class="teacher"><p>Like changing the color of the sun, there are multiple valid ways of completing this
optional activity. If you have students solving the same problem with different code,
have them share their code with the class and have a discussion about the merits of each version.</p></div></li></ul></div></div></blockquote><p></p><div id="copyright"><a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank"><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_3.png" alt="image" width="94" height="37"/></a>Bootstrap:Reactive by Emma Youndtsmith, Emmanuel Schanzer, Kathi Fisler, Shriram Krishnamurthi, and Joe Politz is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">Creative Commons 4.0 Unported License</a>. Based on a work at <a href="http://www.bootstrapworld.org/">www.BootstrapWorld.org</a>. Permissions beyond the scope of this license may be available by contacting <a href="mailto:schanzer@BootstrapWorld.org">schanzer@BootstrapWorld.org</a>.</div></div></div><div id="contextindicator">&nbsp;</div></body></html>