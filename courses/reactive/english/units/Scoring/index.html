<!DOCTYPE html>
<html moznomarginboxes=""><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>Feature: Scoring</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="bootstrap.css" title="default"/><link rel="stylesheet" type="text/css" href="pretty-printing.css" title="default"/><link rel="stylesheet" type="text/css" href="codemirror.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="textbook.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="codemirror.js"></script><script type="text/javascript" src="runmode.js"></script><script type="text/javascript" src="scheme2.js"></script><script type="text/javascript" src="pyret-mode.js"></script><script type="text/javascript" src="bootstraplesson.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML%2Chttp%3A%2F%2Fwww.cs.wpi.edu%2F%7Ekfisler%2Fmathjaxlocal.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="mature"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;">&bull;</td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Feature:<span class="mywbr"> &nbsp;</span> Scoring</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Feature__.Scoring%29" class="tocsubseclink" data-pltdoc="x">Feature:<span class="mywbr"> &nbsp;</span> Scoring</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><a name="(part._.Feature__.Scoring)"></a><p><script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script><noscript></noscript><script type="text/javascript" src="easyXDM.min.js"></script><noscript></noscript><script type="text/javascript" src="json2.min.js"></script><noscript></noscript><script type="text/javascript" src="wescheme-embedded.js"></script><noscript></noscript><script type="text/javascript" src="bootstrap-helpers.js"></script><noscript></noscript></p><div class="headercontent"><span class="BootstrapTitle"><img src="pict.png" alt="image" width="150" height="150"/><span class="TitleUnitNum">Feature</span>Scoring</span></div><div class="SubFlow" id="overviewDescr"><span class="BootstrapHeader">Unit Overview</span><p>Students extend their State structure to include a score, then modify their game code to change and display that score.</p></div><blockquote class="OverviewBoundary"><iframe id="forum_embed"></iframe><div class="summary"><div class="" id="BootstrapAgenda"><p>Agenda</p><ul class="BootstrapAgendaList"><li class="BootstrapAgendaListItem"><p><span class="BSLessonDuration">45 min</span><a href="#lesson_AddingaScoringSystem29489"><span class="BSLessonName">Adding a Scoring System</span></a></p></li></ul></div><p><span href="../../../../reactive/english/units/Scoring/index.html" class="TranslationButton">English</span></p><p><span href="#" class="TranslationButton">add translation</span></p><div id="ProductOutcomes" class=" "><span class="BootstrapHeader">Product Outcomes:</span><ul><li><p>Students add a <tt class="pyret">score</tt> field to their <tt class="pyret">gameState</tt> structure</p></li><li><p>Students modify their <tt class="pyret">draw-state</tt> function to display the score on the screen</p></li><li><p>Students modify other parts of their code to increment or decrement the score</p></li></ul></div><div id="LearningObjectives" class=" "><span class="BootstrapHeader">Standards and Evidence Statements:</span><p>Standards with prefix BS are specific to Bootstrap; others are from the Common Core. Mouse over each standard to see its corresponding evidence statements. Our <a href="http://www.bootstrapworld.org/materials/Standards.shtml" target="_blank">Standards Document</a> shows which units cover each standard. </p><ul class="LearningObjectivesList"><li class="LearningObjectivesListItem"><div class="LearningObjectivesListItemContents"><p><span style="font-weight: bold">BS-DS.1</span>: The student is able to read data blocks</p><ul class="EvidenceStatementsList"><li class="EvidenceStatementsListItem"><p>given a data block, use dot-accessors to access fields of the data structure</p></li></ul></div></li><li class="LearningObjectivesListItem"><div class="LearningObjectivesListItemContents"><p><span style="font-weight: bold">BS-DS.2</span>: The student is able to solve problems using data structures</p><ul class="EvidenceStatementsList"><li class="EvidenceStatementsListItem"><p>add fields to a pre-existing data structure</p></li></ul></div></li><li class="LearningObjectivesListItem"><div class="LearningObjectivesListItemContents"><p><span style="font-weight: bold">BS-M</span>: The student models a problem in context and determines the data needed to describe the problem</p><ul class="EvidenceStatementsList"><li class="EvidenceStatementsListItem"><p>identifying which quantities are fixed and which are variable</p></li><li class="EvidenceStatementsListItem"><p>identifying the datatype of a given quantity, in context</p></li></ul></div></li><li class="LearningObjectivesListItem"><div class="LearningObjectivesListItemContents"><p><span style="font-weight: bold">BS-PL.1</span>: The student is familiar with declaring values and applying built-in functions using the programming language</p><ul class="EvidenceStatementsList"></ul></div></li><li class="LearningObjectivesListItem"><div class="LearningObjectivesListItemContents"><p><span style="font-weight: bold">BS-PL.2</span>: The student is comfortable using and writing Contracts for built-in functions</p><ul class="EvidenceStatementsList"><li class="EvidenceStatementsListItem"><p>representing a function&rsquo;s input and output using a contract</p></li></ul></div></li><li class="LearningObjectivesListItem"><div class="LearningObjectivesListItemContents"><p><span style="font-weight: bold">BS-PL.3</span>: The student is able to use the syntax of the programming language to define values and functions</p><ul class="EvidenceStatementsList"><li class="EvidenceStatementsListItem"><p>defining and retrieving values</p></li></ul></div></li><li class="LearningObjectivesListItem"><div class="LearningObjectivesListItemContents"><p><span style="font-weight: bold">BS-PL.4</span>: The student is familiar with the syntax for conditionals</p><ul class="EvidenceStatementsList"><li class="EvidenceStatementsListItem"><p>defining and using functions than involve conditionals</p></li></ul></div></li><li class="LearningObjectivesListItem"><div class="LearningObjectivesListItemContents"><p><span style="font-weight: bold">BS-R</span>: The student is able to write interactive programs using the &rsquo;Reactor&rsquo; construct</p><ul class="EvidenceStatementsList"><li class="EvidenceStatementsListItem"><p>identify how an updating function changes a data structure</p></li><li class="EvidenceStatementsListItem"><p>identify how a drawing function creates a static image</p></li><li class="EvidenceStatementsListItem"><p>identify how functions work together to create and maintain a complex program</p></li><li class="EvidenceStatementsListItem"><p>modify parts of a complex program by altering functions or data structures</p></li></ul></div></li></ul></div><span class="BootstrapHeader">Length: 45 Minutes</span><div id="Glossary" class=" "><span class="BootstrapHeader">Glossary:</span><ul><li><p><span class="vocab">helper function</span>: A small function that handles a specific part of another computation, and gets called from other functions</p></li></ul></div><div id="Materials" class=" "><span class="BootstrapHeader">Materials:</span><ul></ul></div><div id="Preparation" class=" "><span class="BootstrapHeader">Preparation:</span><ul><li><p>Student Games <span style="font-style: italic">or</span> the <a href="https://code.pyret.org/editor#share=0B9rKDmABYlJVVkpkTmEyd1ZTaE0" target="_blank">Pyret Ninja Cat</a>
file preloaded on students&rsquo; machines</p></li></ul></div><div id="LanguageTable" class=" "><table cellspacing="0" cellpadding="0" class="thetable"><tr><td align="center" class="BootstrapTable"><p class="BootstrapTableHeader">Types</p></td><td align="center" class="BootstrapTable"><p class="BootstrapTableHeader">Functions</p></td><td align="center" class="BootstrapTable"><p class="BootstrapTableHeader">Values</p></td></tr><tr><td align="center" class="BootstrapTable"><p>Number</p></td><td align="center" class="BootstrapTable"><p><tt class="pyret">+ - * / sqr sqrt expt</tt></p></td><td align="center" class="BootstrapTable"><p>1 ,4 ,44.6</p></td></tr><tr><td align="center" class="BootstrapTable"><p>String</p></td><td align="center" class="BootstrapTable"><p><tt class="pyret">string-append string-length</tt></p></td><td align="center" class="BootstrapTable"><p> "hello" </p></td></tr><tr><td align="center" class="BootstrapTable"><p>Image</p></td><td align="center" class="BootstrapTable"><p><tt class="pyret">rectangle circle triangle ellipse star scale rotate put-image</tt></p></td><td align="center" class="BootstrapTable"><p>(circle 25 "solid" "red")</p></td></tr></table></div><p><div id="lessonToolbar" class="fixed"><input type="button" valueShow="Show Teacher Notes" valueHide="Hide Teacher Notes" value="Show Teacher Notes" onclick="toggleTeacherNotes(this);"></input><br/><input type="button" value="Discussion Group" onclick="showGroup()"/><br/><input type="button" value="Slides" onclick="showSlides()"/></div></p></div></blockquote><blockquote class="LessonBoundary"><div class="BootstrapPageTitle">Adding a Scoring System</div><div class="content"><div class="overview"><span class="BootstrapLogo"><p><img src="logo.png" alt="bootstrap logo" width="150" height="150"/></p></span><span class="BootstrapLessonTitle"><span class="BSLessonName"><p>Overview</p></span></span><p>Students learn how to add a scoring system to their game</p><div class="LessonLearningObjectives"><p><span style="font-weight: bold">Learning Objectives</span></p><ul><li><p>BS-DS.1</p></li><li><p>BS-DS.2</p></li><li><p>BS-R</p></li></ul></div><div class="LessonEvidenceStatementes"><p><span style="font-weight: bold">Evidence Statementes</span></p><ul></ul></div><div class="LessonProductOutcomes"><p><span style="font-weight: bold">Product Outcomes</span></p><ul><li><p>Students add a <tt class="pyret">score</tt> field to their <tt class="pyret">gameState</tt> structure</p></li><li><p>Students modify their <tt class="pyret">draw-state</tt> function to display the score on the screen</p></li><li><p>Students modify other parts of their code to increment or decrement the score</p></li></ul></div><div class="LessonMaterials"><p><span style="font-weight: bold">Materials</span></p><ul><li></li></ul></div><div class="LessonPreparation"><p><span style="font-weight: bold">Preparation</span></p><ul><li><p>Student Games <span style="font-style: italic">or</span> the <a href="https://code.pyret.org/editor#share=0B9rKDmABYlJVVkpkTmEyd1ZTaE0" target="_blank">Pyret Ninja Cat</a>
file preloaded on students&rsquo; machines</p></li></ul></div></div><div class="segment"><p><a name="lesson_AddingaScoringSystem29489"></a><span></span></p><span class="BootstrapLessonTitle"><span class="BSLessonName"><span class="Slide-Lesson-Title">Adding a Scoring System</span>



<span class="time">(Time 45 minutes)</span>

</span><p></p></span><ul class="lesson"><li class="lessonItem"><div class="student"><p><span class="slideText"><span class="BootstrapSlideTitle">Adding a Scoring System</span></span>In Bootstrap:Algebra, the scoring system for your video game was included in the teachpack, code which ran
"under the hood" in your game file. In Bootstrap:Reactive, however, you no longer need this hidden code,
since you&rsquo;ve learned enough to program your entire Bootstrap:Algebra game (and more) yourself! In this
lesson, we&rsquo;ll cover how to add a scoring system to your Bootstrap:Reactive game.</p></div><div class="teacher"><p>This lesson is part of a series of features meant to come at the end of the Bootstrap:Reactive units.
Once students have made a number of simple animations and games, they will have <span style="font-style: italic">lots</span> of
ideas for what they want to make next and add to their existing games. We&rsquo;ve included a number of
the most requested features in these lessons. Because each students&rsquo; game will be different, we&rsquo;ve
used a Pyret version of the original Ninja Cat game as an example program, but the lesson can be
adapted to add scoring to any game.</p></div></li><li class="lessonItem"><div class="student"><p><div class="SIntrapara">The score is something that will be changing in the game, so you can be sure that it has to be added
                              to the <tt class="pyret">____State</tt> data structure. In our example Ninja Cat program, we&rsquo;ve called our structure
                              <tt class="pyret">GameState</tt>, which currently contains the x and y-coordinates for our player, danger, and target,
                              plus the speed of the danger, and speed of the target. Your game(s) will likely have different structures.
                            </div><div class="SIntrapara"><div class="activity"><ul><li><p>What data type is a score? Number, String, Image, or Boolean?</p></li><li><p>What would be the score in your starting game state? (we called this <tt class="pyret">START</tt> in our game.)</p></li><li><p>Change the data structure in your game so it includes a <tt class="pyret">score</tt>.</p></li></ul></div></div><div class="SIntrapara">Remember: Since your structure is changing, you now have to go through your game code&#8212;<wbr></wbr><span style="font-style: italic">every time</span>
                            you call the constructor function for your structure (ours is <tt class="pyret">game()</tt>), the score must be included.
                            It may be helpful to add the score as the very first or last field of the structure, to make this easier.
                            </div><div class="SIntrapara"><div class="activity"><p>How would you get the <tt class="pyret">score</tt> out of one of your instances?</p></div></div><div class="SIntrapara">The <tt class="pyret">GameState</tt> structure for <a href="https://code.pyret.org/editor#share=0B9rKDmABYlJVVkpkTmEyd1ZTaE0" target="_blank">our Ninja Cat game</a> now looks like this:
   &nbsp;<textarea class="pyret">
data GameState:
    game(
      playerx :: Number,
      playery :: Number,
      dangerx :: Number,
      dangery :: Number,
      dangerspeed :: Number,
      targetx :: Number,
      targety :: Number,
      targetspeed :: Number,
      score :: Number)
end
</textarea></div></p></div><div class="teacher"><p><span style="font-weight: bold">Reminder:</span> Your students will likely have radically different games at this point in the course.
 This lesson is <span style="font-weight: bold">not</span> meant to be followed exactly, but rather used to give students an idea of what
 steps they should take to add a scoring system to their own games. For extra practice, students
 can work through adding a scoring system to the Ninja Cat program as well as their own games.</p></div></li><li class="lessonItem"><div class="student"><p><div class="SIntrapara">Now that the game has a score, that score needs to actually increase or decrease depending on what happens in the game. For our Ninja Cat game, we&rsquo;ll say that the score should go up by 30 points when Ninja Cat collides with the ruby (target), and down by 20 points when she collides with the dog (danger).
                                 </div><div class="SIntrapara"><div class="activity"><ul><li><p>Which of the <tt class="pyret">if</tt> branches in your <tt class="pyret">next-state-tick</tt> function checks whether your player has collided with another character?</p></li><li><p>How would you decrease the game&rsquo;s <tt class="pyret">score</tt> by 20 points  if the player collides with the danger?</p></li><li><p><span style="font-weight: bold">Hint:</span> How many dangers does your game have? If there are  multiple things your player could hit to lose points, remember to check for each possible collision condition!</p></li></ul></div></div></p><p>If you completed the optional challenge at the end of the <a href="http://www.bootstrapworld.org/materials/spring2017/courses/bs2/units/Collisions/index.html">Collisions Feature</a> to write the function <tt class="pyret">game-over</tt>, you already have your own <span class="vocab">helper function</span> to check whether or not your game over condition is met. That will be the first condition inside <tt class="pyret">next-state-tick</tt>, since we don&rsquo;t want the game to continue if it&rsquo;s already over! (In our Ninja Cat game, <tt class="pyret">game-over</tt> returns true if the cat collides with the dog, AND the cat is on the ground.) After checking whether or not the game is over, the next three conditions in our <tt class="pyret">next-state-tick</tt> function check whether the player has collided with the danger and target, as well as whether the player is jumping on the danger:</p><p>&nbsp;<textarea class="pyret">
# next-state-tick :: GameState -&gt; GameState
fun next-state-tick(g):
  if game-over(g): g
  # if player and danger collide while player is on the ground,
  #reset player and danger and decrease score
  else if is-collision(g.playerx, g.playery, g.dangerx, g.dangery)
    and (g.playery &lt; 110):
    game(
      START.playerx,
      START.playery,
      750,
      g.dangery,
      g.dangerspeed,
      g.targetx,
      g.targety,
      g.targetspeed,
      g.score - 20)
    # if player and danger collide while player is jumping,
    # reset danger and increase score
  else if is-collision(g.playerx, g.playery, g.dangerx, g.dangery)
    and (g.playery &gt; 110) and (g.playery &lt; 300):
    game(
      g.playerx,
      200,
      -100,
      0,
      0,
      g.targetx,
      g.targety,
      g.targetspeed,
      g.score + 30)
  # if player and target collide, reset target and increase score
  else if is-collision(g.playerx, g.playery, g.targetx, g.targety):
    game(
      g.playerx,
      g.playery,
      g.dangerx,
      g.dangery,
      g.dangerspeed,
      -400,
      0,
      0,
      g.score + 30)
</textarea></p><div class="activity"><p>Change your own game code so that your score increases and decreases depending on various game
conditions: Maybe your score increases when the player collides with a target, reaches a specific
area of the screen, or reaches a specific area <span style="font-style: italic">only after</span> picking up an item. Maybe your
game&rsquo;s scoring system isn&rsquo;t a seprate score at all, but a timer that increases every tick, and
represents how long someone has been playing your game. There are lots of ways to implement a
scoring system, and which one you choose will depend on the specific mechanics of your individual
game.</p></div></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p><div class="SIntrapara">Now your scoring system is in place, but how will the person playing your game know what their score is?
                                 You&rsquo;ll want to display the score on the screen.
                                 </div><div class="SIntrapara"><div class="activity"><p>Which function handles how the game state is drawn?</p></div></div><div class="SIntrapara">In the <tt class="pyret">draw-state</tt> function, images are placed onto the background using <tt class="pyret">put-image</tt> to draw the game. But the score is
represented by a Number: we need a way to represent it as an Image. Thankfully, Pyret has some built-in functions that can help with this:
the function <tt class="pyret">num-to-string</tt> takes in a Number for its domain and returns a String representation of that number. This string can
then be passed to the <tt class="pyret">text</tt> function to return an Image that can be used in <tt class="pyret">draw-state</tt>.</div></p><p><div class="SIntrapara"><div class="activity"><p>Copy the following contracts into your workbook:</p><ul><li><p><tt class="pyret"># num-to-string :: Number -&gt; String</tt></p></li><li><p><tt class="pyret"># text :: String, Number, String -&gt; Image</tt></p></li><li><p>How would you use the <tt class="pyret">num-to-string</tt> and <tt class="pyret">text</tt> functions together
to draw the score into the game?</p></li><li><p>How do you get the <tt class="pyret">score</tt> out of the game state?</p></li><li><p>How large should the text of the score be? Where should it be placed on your game scene?</p></li></ul></div></div><div class="SIntrapara">The expression:
                                 &nbsp;<textarea class="pyret">
put-image(text(num-to-string(g.score), 20, "white"), 320, 240, BACKGROUND-IMG)
</textarea>
                                  will place the score (drawn in size 20 white text) onto the center of the BACKGROUND-IMG.
                                  </div><div class="SIntrapara"><div class="activity"><p>Use these functions to draw the score onto your game screen. You could also use the <tt class="pyret">string-append</tt>
                                  function to make it clear to players that the number they see is their score, like so:
<tt class="pyret">text(string-append("Score: ", num-to-string(g.score)), 20, "white")</tt></p></div></div></p></div><div class="teacher"></div></li></ul></div></div></blockquote><p></p><div id="copyright"><a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank"><img src="pict_2.png" alt="image" width="88" height="31"/></a>Bootstrap:Reactive by Emma Youndtsmith, Emmanuel Schanzer, Kathi Fisler, Shriram Krishnamurthi, and Joe Politz is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">Creative Commons 4.0 Unported License</a>. Based on a work at <a href="http://www.bootstrapworld.org/">www.BootstrapWorld.org</a>. Permissions beyond the scope of this license may be available by contacting <a href="mailto:schanzer@BootstrapWorld.org">schanzer@BootstrapWorld.org</a>.</div></div></div><div id="contextindicator">&nbsp;</div></body></html>